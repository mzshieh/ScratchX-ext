"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function t(o,e,n){function c(u,s){if(!e[u]){if(!o[u]){var i="function"==typeof require&&require;if(!s&&i)return i(u,!0);if(r)return r(u,!0);throw new Error("Cannot find module '"+u+"'")}var a=e[u]={exports:{}};o[u][0].call(a.exports,function(t){var e=o[u][1][t];return c(e?e:t)},a,a.exports,t,o,e,n)}return e[u].exports}for(var r="function"==typeof require&&require,u=0;u<n.length;u++)c(n[u]);return c}({1:[function(t,o,e){function n(t,o,e,n){console.log(e),$.ajax({type:"POST",url:t+"/"+o,contentType:"application/json; charset=utf-8",data:JSON.stringify({profile:e}),success:function(t){console.log(t),console.log("register success")},error:function(t,o){console.log(t),console.log(o),console.log("register failed")},complete:function(){"function"==typeof n&&n()},dataType:"text"})}function c(t,o,e){$.ajax({type:"DELETE",url:t+"/"+o,success:function(t){console.log(t),console.log("Detach success")},error:function(t,o){console.log(t),console.log(o),console.log("Detach failed")},complete:function(){"function"==typeof e&&e()},dataType:"text"})}function r(t,o,e,n,c){$.ajax({type:"PUT",url:t+"/"+o+"/"+e,contentType:"application/json; charset=utf-8",data:JSON.stringify({data:n}),success:function(t){console.log(t),console.log("Update success")},error:function(t,o){console.log(t),console.log(o),console.log("Update failed")},complete:function(){"function"==typeof c&&c()},dataType:"text"})}function u(t,o,e,n){var c=-1;$.ajax({type:"GET",cache:!1,url:t+"/"+o+"/"+e,success:function(t){c=JSON.parse(t),c="object"===("undefined"==typeof c?"undefined":_typeof(c))&&c.samples&&c.samples[0]&&c.samples[0][1]?c.samples[0][1]:[],console.log(t),console.log("Get success")},error:function(t,o){console.log(t),console.log(o),console.log("Get failed")},complete:function(){"function"==typeof n&&n(c)},dataType:"text"})}window&&(window.IoTtalk={register:n,detach:c,update:r,get:u}),o.exports={register:n,detach:c,update:r,get:u}},{}],2:[function(t,o,e){var n={_shutdown:function(){confirm("_shutdown")},_getStatus:function(){return{status:2,msg:"Ready"}}},c={blocks:[]};o.exports={add:function(t,o,e){var r=Math.random().toString();n[r]=t,c.blocks.push([o,e,r]);for(var u=c.blocks.length-1,s=3;s<arguments.length;++s)c.blocks[u].push(arguments[s])},ext:n,descriptor:c}},{}],3:[function(t,o,e){!function(o){function e(){y&&(y=!1,f&&f.ScratchX_input&&i.update(l,p,"ScratchX_input",[f.ScratchX_input])),setTimeout(e,h)}function n(t,o){o(f&&f.ScratchX_output?"object"===_typeof(f.ScratchX_output)?"undefined"!=typeof f.ScratchX_output[parseInt(t,10)]?f.ScratchX_output[parseInt(t,10)]:"undefined"!=typeof f.ScratchX_output[t.toString()]?f.ScratchX_output[t.toString()]:-1:f.ScratchX_output:"not exist")}function c(t,o,e,n){l="http://"+o+":"+e,p=t,f={profile:{d_name:p,dm_name:"ScratchX",is_sim:!1,df_list:["ScratchX_input","ScratchX_output"]}},i.register(l,p,f.profile,n)}function r(t){""===l?t():(l="",i.detach(l,p,t))}function u(t,o,e){f||(f={}),f.ScratchX_input||(f.ScratchX_input={}),f.ScratchX_input[t]=o,updateSet[p]||(updateQueue.push(p),updateSet[p]=!0),e()}function s(t,o){if(""===l)return void o("server url not given");if(Date.now()-g<=d)n(t,o);else{g=Date.now();try{i.get(l,p,"ScratchX_output",function(e){console.log(e),console.log("undefined"==typeof e?"undefined":_typeof(e)),f.ScratchX_output=e[0],n(t,o)})}catch(e){o("js bug, plase report to github")}}}var i=t("__iottalk_api.js"),a=t("__scratchX-register.js"),l="",p="",f=null,d=200,g=Date.now(),h=200,y=!1;setTimeout(e,2e3),a.add(c,"w","register %s to IoTtalk server %s %s","mac_addr","ip","port"),a.add(r,"w","detach device"),a.add(u,"w","update device %s = %s","key","val"),a.add(u,"w","update device %s = %d","key","0"),a.add(s,"R","get %s","key"),ScratchExtensions.register("Chatroom extension",a.descriptor,a.ext),a.ext._shutdown=r,window.onunload=r,window.onbeforeunload=r,window.onclose=r,window.onpagehide=r}({})},{"__iottalk_api.js":1,"__scratchX-register.js":2}]},{},[3]);
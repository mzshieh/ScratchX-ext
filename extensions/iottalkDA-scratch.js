"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function t(e,o,n){function c(s,u){if(!o[s]){if(!e[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var i=o[s]={exports:{}};e[s][0].call(i.exports,function(t){var o=e[s][1][t];return c(o?o:t)},i,i.exports,t,e,o,n)}return o[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)c(n[s]);return c}({1:[function(t,e,o){function n(t,e,o,n){$.ajax({type:"POST",url:t+"/"+e,contentType:"application/json; charset=utf-8",data:JSON.stringify({profile:o}),success:function(t){console.log(t),console.log("register success")},error:function(t,e){console.log(t),console.log(e),console.log("register failed")},complete:function(){"function"==typeof n&&n()},dataType:"text"})}function c(t,e,o){$.ajax({type:"DELETE",url:t+"/"+e,success:function(t){console.log(t),console.log("Detach success")},error:function(t,e){console.log(t),console.log(e),console.log("Detach failed")},complete:function(){"function"==typeof o&&o()},dataType:"text"})}function r(t,e,o,n,c){$.ajax({type:"PUT",url:t+"/"+e+"/"+o,contentType:"application/json; charset=utf-8",data:JSON.stringify({data:n}),success:function(t){console.log(t),console.log("Update success")},error:function(t,e){console.log(t),console.log(e),console.log("Update failed")},complete:function(){"function"==typeof c&&c()},dataType:"text"})}function s(t,e,o,n){var c=-1;$.ajax({type:"GET",cache:!1,url:t+"/"+e+"/"+o,success:function(t){c=JSON.parse(t),c="object"===("undefined"==typeof c?"undefined":_typeof(c))&&c.samples&&c.samples[0]&&c.samples[0][1]?c.samples[0][1]:[],console.log(t),console.log("Get success")},error:function(t,e){console.log(t),console.log(e),console.log("Get failed")},complete:function(){"function"==typeof n&&n(c)},dataType:"text"})}window&&(window.IoTtalk={register:n,detach:c,update:r,get:s}),e.exports={register:n,detach:c,update:r,get:s}},{}],2:[function(t,e,o){var n={_shutdown:function(){confirm("_shutdown")},_getStatus:function(){return{status:2,msg:"Ready"}}},c={blocks:[]};e.exports={add:function(t,e,o,r){n[r]=t,c.blocks.push([e,o,r]);for(var s=c.blocks.length-1,u=4;u<arguments.length;++u)c.blocks[s].push(arguments[u])},ext:n,descriptor:c}},{}],3:[function(t,e,o){!function(e){function o(){if(y.length){var t=y[0][0];y.shift(1),delete _[t],p&&p.ScratchX_output&&(console.log(t),console.log(p.ScratchX_output),a.update(l,t,"ScratchX_output",p.ScratchX_output))}setTimeout(o,h)}function n(t,e){e(p&&p.ScratchX_output?"object"===_typeof(p.ScratchX_output)?"undefined"!=typeof p.ScratchX_output[parseInt(t,10)]?p.ScratchX_output[parseInt(t,10)]:"undefined"!=typeof p.ScratchX_output[t.toString()]?p.ScratchX_output[t.toString()]:-1:p.ScratchX_output:"not exist")}function c(t,e,o){l="http://"+e+":"+o,f=t,p={profile:{d_name:"ScratchX_"+f,dm_name:"ScratchX",is_sim:!1,df_list:["ScratchX_input","ScratchX_output"]}},""===l?callback():a.register(l,f,p.profile,callback)}function r(t){""===l?t():a.detach(l,f,t)}function s(t,e){""!==l&&p&&(p.ScratchX_output[t]=e,_[f]||(y.push(f),_[f]=!0))}function u(t,e){if(""===l)return void e("server url not given");if(Date.now()-g<=d)n(t,e);else{g=Date.now();try{a.get(l,d_name,df_name,function(o){console.log(o),console.log("undefined"==typeof o?"undefined":_typeof(o)),p.ScratchX_output=o,n(t,e)})}catch(o){e("js bug, plase report to github")}}}var a=t("__iottalk_api.js"),i=t("__scratchX-register.js"),l="",f="",p=null,d=200,g=Date.now(),h=200,y=[],_={};setTimeout(o,2e3),i.add(c,"w","register %s IoTtalk server %s %s","setserver","mac_addr","ip","port"),i.add(r,"w","detach device","detach"),i.add(s," ","update device %s = %s","updateStr","key","val"),i.add(s," ","update device %s = %d","updateNum","key","0"),i.add(u,"R","get %s","get","d_name","key"),ScratchExtensions.register("Chatroom extension",i.descriptor,i.ext)}({})},{"__iottalk_api.js":1,"__scratchX-register.js":2}]},{},[3]);